// Global process configuration
process {
    executor = 'awsbatch'
    queueSize = 100
    maxForks = 16          
    errorStrategy = { task.exitStatus in [130,143,137,104,134,139,140] ? 'retry' : 'finish' }
    maxRetries = 20  
    maxErrors = 100
    
    // Resource labels for cost tracking
    resourceLabels = ['allen-batch-pipeline': 'aind-pophys-pipeline']
    
    // Process-specific configurations
    withName: 'classifier' { 
        containerOptions = '--shm-size 4000'
        // Classifier often needs more memory and retries due to GPU issues
        memory = { 64.GB * task.attempt }
        maxRetries = 5
    }

    // movie_qc configuration has been moved directly to main.nf
}